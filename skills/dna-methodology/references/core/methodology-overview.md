# DNA v4.0 방법론 개요

## 왜 DNA v4.0가 필요한가?

### AI 컨텍스트 한계의 본질

**2년간 AI 협업의 경험**:
- 대부분의 프로젝트 실패
- 이유: **AI 컨텍스트 한계**

**컨텍스트 한계의 본질**:
- 트랜스포머 모델 구조 자체의 한계
- 토큰 간 관계를 학습하는데, 너무 길어지면 관계가 약해짐
- **많은 정보 ≠ 좋은 결과**
- 적당한 길이 + 적당한 수준 = 좋은 작업

**현실**:
- Claude Desktop: 200K hard limit → 넘으면 대화 멈춤, 처음부터 다시
- Claude Code: Compact 기능 있지만 너무 길어지면 앞부분 까먹음

---

## 핵심 3단계 해결책

### 1. 단계적 정의

**문제**:
- 넷플릭스 같은 큰 프로젝트의 청사진을 한 번에 완전하게 작성? → 불가능
- AI 컨텍스트 한계로 반드시 뭔가 누락됨

**해결**:
```
Stage 1: 핵심 정의 (패밀리 분류)
Stage 2: 구조 설계 (환경 제약)
Stage 3: ADR (아키텍처 결정)
Stage 4: DNA 시스템 계획
Stage 5: DNA 시스템 구현
Stage 6: 프로젝트 표준
─────────────────────────────
Stage 7: 청사진 ← 이제 작성 가능!
Stage 8: 작업 분해
Stage 9: 체크리스트
```

**핵심**:
- 청사진은 "환경(Stage 1-6)"을 제외한 모든 것을 담아야 함
- 환경이 먼저 정의되어야 청사진을 완전하게 작성 가능
- 단계적으로 정의 → 각 단계는 AI가 처리 가능한 크기

### 2. 환경 강제

**문제**:
- AI에게 규칙 말로 강조 → 반복 실패
  - 타입 오류
  - print() 사용
  - 무분별한 모킹
  - TODO, pass 남발

**해결: "환경" (Environment)**:
```
환경 = Standards + 11 DNA Systems + 자동화 강제

├─ Standards (문서화된 규칙)
│   └─ "print() 사용 금지"
│
├─ 11 DNA Systems (공용 모듈)
│   ├─ src/core/logging/ (structlog)
│   ├─ src/core/types/ (Pydantic)
│   └─ ... (11개)
│
└─ 자동화 강제
    ├─ Pre-commit hooks → print() 감지 시 커밋 차단
    ├─ CI/CD
    └─ Import-linter
```

**핵심**: AI가 틀리고 싶어도 틀릴 수 없게!

### 3. 레고블럭 전략

**전략**: 서로 딱 맞아떨어지는 레고블럭 하나만 만들게!

```
청사진 (Blueprint)
  - 환경이 갖춰진 후 작성
  - 모든 것을 담은 전체 설계도
  - 컨텍스트가 온전할 때 작성
     ↓
작업분해 (Task Breakdown)
  - 독립 실행 가능한 레고블럭으로 나누기
  - 각 블럭은 완전하게 (TODO, pass 없이)
     ↓
체크리스트 (Checklist)
  - 각 블럭별로 "그것만 보고 실행 가능"한 생명줄
  - 어떻게 구현하고 검증할 것인가
  - 나중의 2호/1호/Agent를 위한 완전한 정보
     ↓
구현 (Implementation)
  - 체크리스트만 읽고 실행
  - 전체 컨텍스트 불필요!
  - 블럭 하나씩 완성 = 전체 완성
```

**검증된 프로세스**: 청사진 → 작업분해 → 체크리스트 → 구현

---

## 3가지가 맞물려서

1. **단계적 정의**: Stage 1-6 완성 → 청사진 완전하게 작성 가능
2. **환경 강제**: AI가 실수할 수 없는 시스템
3. **레고블럭**: 독립 실행 가능한 작업 단위로 컨텍스트 한계 극복

**결과**:
- 큰 프로젝트도 완전하게 정의 가능
- 일관성 자동 보장
- AI 컨텍스트 한계 안에서 완벽한 실행

> **"한계극복!!! 그 방법은 '환경'을 만드는 것!"** - Jason
