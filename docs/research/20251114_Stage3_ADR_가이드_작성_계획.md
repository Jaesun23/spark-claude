# Stage 3 ADR 가이드 작성 계획

**작성일**: 2025-11-14
**목적**: Gemini 보고서 분석 결과 및 Stage 3 ADR 가이드 작성 전략

---

## 📊 Gemini 보고서 분석 결과

### ❌ 핵심 문제: 우리 가이드 재정리일 뿐

**내용 비율**:
- 우리 가이드 내용: **80%**
- 새로운 개념: **20%** (Policy-as-Code, Fitness Functions)
- 실제 사례: **0%**
- 즉시 사용 가능한 템플릿: **0%**

**결론**: 새 세션 2호가 Gemini 보고서만으로 ADR 작성 **불가능**

---

## ✅ Gemini 보고서에서 차용할 내용 (3가지)

### 1️⃣ 4대 구성요소 프레임워크

**출처**: Gemini Part 1 (23-30줄)

**내용**:
```
"명시적이고 강제 가능한 환경"의 4대 구성요소:
1. 성문화된 결정 (ADR) - Why + What
2. 재사용 가능한 핵심 컴포넌트 (src/core/) - Tools
3. 의무적 규칙 집합 (Project Standards) - Rulebook
4. 자동화된 거버넌스 (Pre-commit/Fitness) - Police
```

**활용 위치**: `03G-00` 개요 섹션 "ADR의 역할"

### 2️⃣ Stage 2→3 매핑표

**출처**: Gemini Part 2, 표1 (62-71줄)

**내용**:
```markdown
| Stage 2 단계 | 생성 ADR | 결정 성격 | 개수 |
|-------------|---------|----------|------|
| P3-Q3: 제약 종합 | 1️⃣ 외부 제약 ADR | 어쩔 수 없는 선택 | 3-5개 |
| P3-Q2: NFR 충돌 | 2️⃣ 충돌 해결 ADR | 어쩔 수 없는 타협 | 2-3개 |
| P3-Q4: 기술 스택 | 3️⃣ 기술 스택 ADR | 최선의 선택 | 4-6개 |
| P3-Q5: 설계 방법 | 4️⃣ 도메인 기술 ADR | 문제 해결 필수 | 2-4개 |
| P3-Q6: DNA 시스템 | 5️⃣ DNA 시스템 ADR | 자동 결정 | 11개 |
```

**활용 위치**:
- `02G-00` "Stage 3 준비" (간단한 표)
- `03G-00` Part 1 "카테고리 이해" (상세 설명)

### 3️⃣ 자동화된 거버넌스 개념

**출처**: Gemini Part 7 (273-290줄)

**내용**:
```markdown
1. Policy-as-Code: 규칙을 코드로 (pre-commit, ArchUnit, import-linter)
   - 예: "print() 금지", "순환 의존성 금지"

2. Architecture Fitness Functions: NFR을 자동 테스트로 (pytest, CI/CD)
   - 예: "API 응답 200ms", "커버리지 95%"
```

**활용 위치**: `03G-00` Part 4 "Compliance 구현"

---

## 📋 Gemini 추가 연구 요청 내용 (4개 카테고리)

Jason이 Gemini에게 추가 요청할 내용:

### Category 1: 실제 엔터프라이즈 ADR 사례
- Kubernetes 프로젝트 실제 ADR 문서 3개
- GitLab Architecture Decision 실제 문서
- Terraform Design Doc 구조
- ADR → 구현 사이의 중간 문서

### Category 2: 즉시 사용 가능한 템플릿
- ADR 템플릿 5개 (카테고리별 마크다운)
- Project Standards 템플릿
- .pre-commit-config.yaml 예시
- ArchUnit 테스트 예시 (Java)
- Fitness Function pytest 예시 (Python)

### Category 3: 방법론 비교 검증
- SEI ADD vs DNA v4.0 비교표
- DNA v4.0에서 빠진 것
- Policy-as-Code vs Fitness Functions 사용 시점

### Category 4: 실행 가이드 (Step-by-Step)
- ADR 작성 step-by-step (카테고리별)
- ADR → Project Standards 변환 방법
- Compliance 구현 순서

---

## 🎯 Stage 3 ADR 가이드 작성 계획

### 문서 구조

**생성할 파일**:
- `03G-00_adr_guide.md` (필수)
- `03M-01_adr_manual.md` (선택, Gemini 결과 보고 판단)

**03G-00 구조**:
```markdown
# Stage 3: ADR (Architecture Decision Records)

## 개요
### ADR이란?
### 4대 구성요소에서 ADR의 역할 ← Gemini
### ADR vs Standards

## Part 1: ADR 5개 카테고리 이해
### 1.1 Stage 2→3 매핑 ← Gemini
### 1.2 카테고리별 특성
- 1️⃣ 외부 제약 ADR
- 2️⃣ 충돌 해결 ADR
- 3️⃣ 기술 스택 ADR
- 4️⃣ 도메인 기술 ADR
- 5️⃣ DNA 시스템 ADR

## Part 2: ADR 템플릿
### 2.1 기본 템플릿 (AWS 기반)
### 2.2 DNA v4.0 맞춤 조정
### 2.3 카테고리별 변형

## Part 3: ADR 작성 체크리스트
### 3.1 카테고리 선택
### 3.2 작성 프로세스
### 3.3 검토 기준

## Part 4: Compliance 구현
### 4.1 Policy-as-Code ← Gemini
### 4.2 Architecture Fitness Functions ← Gemini
### 4.3 Compliance 작성 가이드

## 산출물 문서
### DNA 시스템 ADR (03A-001~011)
### 도메인 ADR (03A-101~)
```

---

## 📅 작업 단계 (3 Phases)

### Phase 1: 즉시 시작 (Gemini 불필요, ~1시간)

**Task 1-1: 02G-00 수정** (5분)
- 파일: `02G-00_environment_constraints_guide.md`
- 위치: "Stage 3 준비" 섹션
- 내용: Stage 2→3 매핑표 추가
- 목적: Stage 2 완료 후 다음 단계 preview

**Task 1-2: AWS ADR 가이드 조사** (5분)
- 방법: WebFetch
- 대상: AWS Prescriptive Guidance ADR 문서
- 목적: 표준 ADR 템플릿 구조 파악

**Task 1-3: 03G-00 뼈대 작성** (10분)
- 파일: `03G-00_adr_guide.md` 생성
- 내용: 전체 섹션 구조 배치
- 목적: 작업 프레임워크 확립

**Task 1-4: 개요 섹션 작성** (15분)
- ADR 정의 및 목적
- 4대 구성요소 (Gemini 차용)
- ADR vs Standards 차이

**Task 1-5: Part 1 작성** (20분)
- Stage 2→3 매핑표 (Gemini 차용)
- 5개 카테고리별 특성
- "결정 성격" 명시

### Phase 2: 초안 작성 (~1시간)

**Task 2-1: Part 2 작성**
- AWS 기반 기본 템플릿
- DNA v4.0 맞춤 (Category, Compliance 추가)
- 5개 카테고리별 변형

**Task 2-2: Part 3 작성**
- 카테고리 선택 방법
- 각 섹션 작성 가이드
- 02E-01 사례 참조

**Task 2-3: Part 4 작성**
- Policy-as-Code 개념 (Gemini)
- Fitness Functions 개념 (Gemini)
- Compliance 작성 가이드 초안

### Phase 3: Gemini 결과 보완 (나중)

**Task 3-1: 템플릿 검증**
- Gemini 템플릿과 비교
- 실제 엔터프라이즈 사례 추가
- 필요시 수정

**Task 3-2: 코드 예시 추가**
- .pre-commit-config.yaml
- Fitness Function pytest
- Part 4 보강

**Task 3-3: 03M-01 필요성 판단**
- 내용이 방대하면 매뉴얼 분리
- 아니면 03G-00 단일 문서 유지

---

## 🎲 리스크 및 대응

### 리스크 1: ADR 템플릿이 표준과 다를 수 있음
- **완화**: AWS 가이드 기반이므로 표준에 가까움
- **대응**: Gemini 결과로 검증 및 조정

### 리스크 2: 5개 카테고리별 차이가 모호
- **완화**: 02E-01 사례로 검증 (18개 ADR 이미 분류됨)
- **대응**: "결정 성격" 명시로 구분 명확화

### 리스크 3: Gemini 결과가 방향과 다를 수 있음
- **완화**: 우리 방법론은 Phase 2로 검증됨
- **대응**: Gemini는 보완용, 핵심은 우리 방법론

---

## ✅ 의사결정 포인트

### 포인트 1: 03M-01 작성 여부
- **시점**: Phase 3 (Gemini 결과 후)
- **기준**: 03G-00이 30페이지 초과 시 분리
- **결정자**: Jason 또는 2호 판단

### 포인트 2: 02E-01 분리 여부
- **현재**: Stage 1-2-3 통합 사례
- **질문**: ADR 부분만 03E-01로 분리?
- **결정**: 일단 통합 유지, 필요시 Jason 확인

---

## 📚 참고 자료

### 우리 기존 문서
- `02G-00_environment_constraints_guide.md`: Stage 2 가이드
- `02M-01_environment_constraints_manual.md`: Stage 2 매뉴얼
- `02E-01_stock_trading_case.md`: 주식 거래 사례 (ADR 18개 목록 포함)

### 외부 참고
- AWS Prescriptive Guidance: ADR Process
- Microsoft Azure: Architecture Decision Record
- Gemini 보고서: `Gemini_엔터프라이즈_설계_프로세스_보완_리서치.md`

---

## 🚀 다음 액션

**즉시 실행**: Phase 1 (Task 1-1 ~ 1-5)
- 02G-00 수정
- AWS 조사
- 03G-00 뼈대 + 개요 + Part 1

**대기**: Gemini 추가 연구 결과
**후속**: Phase 2-3 진행
