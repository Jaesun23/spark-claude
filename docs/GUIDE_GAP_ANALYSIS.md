# 가이드 Gap 분석 문서

**작성일**: 2025-01-10
**작성자**: 2호
**목적**: TASK_BREAKDOWN_GUIDE와 CHECKLIST_GUIDE의 정보 충분성 검증

---

## 🎯 핵심 검증 질문

**"다음 단계에서 이전 단계 문서만 보고 작업할 수 있을 만큼 충분한 정보가 담겨있는가?"**

### 검증 대상

```
청사진 (5000줄)
    ↓
작업분해 문서 (Task 100줄씩)
    ↓
체크리스트 (Task당 파일 1개, 9-Step)
    ↓
구현
```

---

## 📊 비교 대상 문서

### 1. 신규 작성 가이드
- `TASK_BREAKDOWN_GUIDE.md` (2025-01-10 작성)
- `CHECKLIST_GUIDE.md` (2025-01-10 작성)

### 2. 기존 V5 문서
- `📖_V5_TaskBreakdown_작성가이드_v3.6.md` (1호 작성)
- `UNIFIED_TASK_BREAKDOWN_v5.0.md` (실제 작업분해 문서)

---

## 🔍 Gap Analysis 1: 청사진 → 작업분해

### 신규 가이드가 요구하는 정보 (9-Section 템플릿)

#### Section 1: 청사진 참조
```markdown
**Blueprint Line 145-178**: JWT 알고리즘 및 토큰 구조
```
- **청사진 요구사항**: 해당 라인에 구현 내용 상세 기술 필요
- **검증 필요**: 청사진에 Line 번호 참조 가능한 구조인가?

#### Section 2: 프로젝트 표준 참조
```markdown
**PROJECT_STANDARDS.md Line 12-25**: structlog 로깅 패턴
**PROJECT_STANDARDS.md Line 45-58**: Pydantic Settings 사용법
```
- ❓ **Gap**: 청사진에 프로젝트 표준 문서 경로가 명시되어 있는가?
- ❓ **Gap**: 청사진에 어느 표준의 어느 부분을 참조해야 하는지 적혀있는가?

#### Section 3: 사용 도구
```markdown
- **PyJWT**: JWT 토큰 생성/검증
- **Redis**: 세션 저장소
```
- ❓ **Gap**: 청사진에 "이 기능은 PyJWT를 사용해" 명시되어 있는가?
- ❓ **Gap**: 청사진에 도구별 용도가 명확히 적혀있는가?

#### Section 4: 입력/출력
```markdown
**입력**: user_id: str
**출력**: token: str - JWT 액세스 토큰 (1시간 유효)
```
- ❓ **Gap**: 청사진에 함수 시그니처 수준의 명세가 있는가?
- ❓ **Gap**: 청사진에 타입 힌트까지 명시되어 있는가?

#### Section 5: 조립 정보
```markdown
**이 블럭을 사용하는 Task**: T2.2.1, T2.2.3
**이 블럭이 사용하는 Task**: 없음 (독립 블럭)
```
- ❓ **Gap**: 청사진에 컴포넌트 간 의존성이 명시되어 있는가?
- ❓ **Gap**: 청사진에 "누가 이걸 사용하는지" 적혀있는가?

#### Section 6: 완성 기준
```markdown
- [ ] create_token(user_id) 함수 완전 작동
- [ ] pytest 테스트 3개 통과 (성공/만료/잘못된 시크릿)
- [ ] ruff 0, mypy 0, coverage 95%+
```
- ❓ **Gap**: 청사진에 "테스트 몇 개 필요" 명시되어 있는가?
- ❓ **Gap**: 청사진에 품질 기준 (ruff 0, mypy 0)이 적혀있는가?
- ✅ **OK**: 품질 기준은 프로젝트 표준에 있으므로 청사진에 없어도 됨 (표준 참조)

#### Section 7: 구현 힌트
```python
def create_token(user_id: str) -> str:
    payload = {
        "user_id": user_id,
        "exp": datetime.utcnow() + timedelta(hours=1),
    }
    return jwt.encode(payload, settings.jwt_secret, algorithm="HS256")
```
- ❓ **Gap**: 청사진에 코드 예시가 포함되어 있는가?
- ❓ **Gap**: 청사진에 핵심 알고리즘이 의사코드로라도 적혀있는가?

#### Section 8: 예상 작업 시간
```markdown
2-3 hours
```
- ❓ **Gap**: 청사진에 작업 시간 추정이 있는가?
- ✅ **OK**: 작업분해 단계에서 추정해도 됨 (청사진에 없어도 됨)

#### Section 9: 메타정보
```markdown
**작성일**: 2025-01-09
**작성자**: 2호
**Task ID**: T2.1.1
```
- ✅ **OK**: 작업분해 단계에서 생성 (청사진에 없어도 됨)

---

## 🔍 Gap Analysis 2: 작업분해 → 체크리스트

### 신규 가이드가 요구하는 정보 (9-Step)

#### Step 1: 목표 이해
**필요 정보**: Task Section 4 (입출력), Section 6 (완성 기준)

**V5 문서 검증**:
```markdown
### TASK-MIG-SD-01: SurrealDB Memory Repository

**구현 위치**: `src/infrastructure/surrealdb/memory_repository.py`

**🔧 구현 체크포인트**:
- Step 1: SurrealDB 연결 설정
- Step 2: 스키마 정의 (memory table)
```

- ❌ **Gap**: V5에 **입력/출력 명세 없음**
- ❌ **Gap**: V5에 **완성 기준 없음** (ruff 0, mypy 0, coverage 95%)
- ✅ **있음**: 구현 체크포인트 (하지만 이건 "어떻게"이지 "완성 조건" 아님)

#### Step 2: 테스트 작성
**필요 정보**: Task Section 6 (완성 기준 → 테스트 케이스 유도)

**V5 문서 검증**:
- ❌ **Gap**: "pytest 테스트 3개 (성공/만료/잘못된 시크릿)" 같은 명세 없음
- ❌ **Gap**: 테스트 케이스 종류 (성공/실패/엣지) 명시 없음

**결과**: Step 2 작성 불가능 ❌

#### Step 3: 구현
**필요 정보**: Task Section 7 (구현 힌트), Section 2 (표준 참조)

**V5 문서 검증**:
- ✅ **있음**: 구현 예시 400줄 코드
- ✅ **있음**: 필수 참조 문서

**결과**: Step 3 작성 가능 ✅

#### Step 4: 정적 검증
**필요 정보**: 품질 기준 (ruff, mypy, import-linter)

**V5 문서 검증**:
- ❌ **Gap**: Task 문서에 품질 기준 없음
- ❓ **대안**: 프로젝트 표준 문서에서 가져와야 하나?
- ❓ **문제**: 체크리스트가 "Task 문서만" 보고 작성 가능한가?

**결과**: Step 4 작성 불확실 ❓

#### Step 5: 테스트 실행
**필요 정보**: 커버리지 목표 (95%+)

**V5 문서 검증**:
- ❌ **Gap**: 커버리지 목표 없음

#### Step 6-7: 리팩토링 + 재테스트
**필요 정보**: 리팩토링 기준 (함수 길이 50줄, depth 3)

**V5 문서 검증**:
- ❌ **Gap**: 리팩토링 기준 없음
- ❓ **대안**: 프로젝트 표준에 있어야 하나?

#### Step 8: 문서화
**필요 정보**: Task Section 4 (입출력 → docstring)

**V5 문서 검증**:
- ❌ **Gap**: 입출력 명세 없음

#### Step 9: 커밋
**필요 정보**: Task ID (커밋 메시지 "Closes T2.1.1")

**V5 문서 검증**:
- ✅ **있음**: TASK-MIG-SD-01

---

## 📋 발견된 Gap 요약

### Gap 1: Task 문서에 없는 필수 정보

**신규 가이드 9-Section 템플릿**에는 있지만 **V5 문서**에는 없는 것:

| Section | 항목 | V5 문서 | 체크리스트에 필수? |
|---------|------|---------|-------------------|
| 4 | 입력/출력 명세 | ❌ 없음 | ✅ 필수 (Step 1, 8) |
| 5 | 조립 정보 (의존성) | ⚠️ 일부 (의존성만) | ⚠️ 권장 |
| 6 | 완성 기준 | ❌ 없음 | ✅ 필수 (Step 1, 2, 7) |

### Gap 2: V5 문서에 있는데 신규 템플릿에 없는 것

**V5 문서**에는 있지만 **신규 가이드**에는 없는 것:

| 항목 | V5 문서 | 신규 템플릿 | 추가 필요? |
|------|---------|------------|-----------|
| 난이도 | ✅ EASY/MEDIUM/HIGH | ❌ 없음 | ⚠️ 고려 필요 |
| 예상 시간 | ✅ 6시간 | ✅ Section 8 | ✅ 있음 |
| 의존성 | ✅ MIG-BR-01 | ✅ Section 5 | ✅ 있음 |
| 구현 위치 | ✅ 파일 경로 | ❌ 없음 | ⚠️ 고려 필요 |
| 자주 하는 실수 | ✅ ❌/✅ 패턴 | ❌ 없음 | ⚠️ 고려 필요 |

### Gap 3: 청사진에 있어야 할 정보

**Task 문서 작성을 위해 청사진에 필요한 것**:

| 정보 | 청사진 필요? | 근거 |
|------|------------|------|
| 프로젝트 표준 문서 경로 | ✅ 필수 | Task Section 2 |
| 사용 도구 리스트 | ✅ 필수 | Task Section 3 |
| 함수 시그니처 (입출력) | ✅ 필수 | Task Section 4 |
| 컴포넌트 의존성 | ✅ 필수 | Task Section 5 |
| 테스트 케이스 종류 | ⚠️ 권장 | Task Section 6 → Checklist Step 2 |
| 코드 예시/의사코드 | ✅ 필수 | Task Section 7 |

---

## 🤔 고려해야 할 질문들

### 질문 1: 품질 기준의 위치

**현재 상황**:
- 신규 가이드: Task Section 6에 "ruff 0, mypy 0, coverage 95%" 포함
- V5 문서: Task에 품질 기준 없음 (프로젝트 전체 목표로만 명시)

**선택지**:
- A: Task마다 품질 기준 명시 (신규 가이드 방식)
- B: 프로젝트 표준 문서에만 명시 (V5 방식)
- C: 청사진에 명시

**고려사항**:
- "체크리스트가 Task 문서만 보고 작성 가능"하려면 A가 필요
- 하지만 모든 Task에 동일한 기준 반복은 비효율

### 질문 2: 입출력 명세의 상세 수준

**현재 상황**:
- 신규 가이드: 타입 힌트 포함 명세 (`user_id: str`)
- V5 문서: 입출력 명세 없음

**선택지**:
- A: 청사진에 함수 시그니처 수준 명세
- B: 청사진에 개념적 입출력만 (구체적 타입은 Task에서)
- C: Task 문서에서 추론 가능

**고려사항**:
- docstring 작성 (Checklist Step 8)에 필수
- 테스트 작성 (Checklist Step 2)에 필요

### 질문 3: 완성 기준의 구체성

**현재 상황**:
- 신규 가이드: "pytest 테스트 3개 (성공/만료/잘못된 시크릿)"
- V5 문서: "구현 체크포인트" (Step 1-5)

**차이점**:
- 구현 체크포인트: **어떻게** 구현할지
- 완성 기준: **언제** 완성인지

**선택지**:
- A: 둘 다 포함 (신규 가이드 방식)
- B: 구현 체크포인트만 (V5 방식)

**고려사항**:
- 체크리스트 Step 1에서 성공 기준 정의 필요
- 체크리스트 Step 7에서 최종 검증 필요

### 질문 4: 난이도/구현 위치/자주 하는 실수

**V5에는 있지만 신규 템플릿에 없는 것**:
- 난이도 (EASY/MEDIUM/HIGH)
- 구현 위치 (`src/infrastructure/...`)
- 자주 하는 실수 (❌/✅ 패턴)

**필요성**:
- 난이도: 작업 계획/우선순위 결정에 유용
- 구현 위치: 체크리스트 Step 3에서 파일 생성 위치 필요
- 자주 하는 실수: 실수 방지에 매우 유용

**결론**: ✅ **추가 필요**

---

## 🎯 결론: 필요한 정보 매트릭스

### 청사진에 반드시 포함되어야 할 정보

| 정보 | 필수 여부 | 이유 |
|------|----------|------|
| 컴포넌트별 구현 내용 상세 | ✅ 필수 | Task Section 1 참조 |
| 프로젝트 표준 문서 경로 + 해당 Section | ✅ 필수 | Task Section 2 |
| 사용 도구 리스트 + 용도 | ✅ 필수 | Task Section 3 |
| 함수/클래스 시그니처 (입출력) | ✅ 필수 | Task Section 4 |
| 컴포넌트 간 의존성 | ✅ 필수 | Task Section 5 |
| 코드 예시 또는 의사코드 | ✅ 필수 | Task Section 7 |
| 테스트 케이스 종류 | ⚠️ 권장 | Checklist Step 2 |
| 품질 기준 | ❌ 불필요 | 프로젝트 표준 참조 |

### Task 문서에 반드시 포함되어야 할 정보

| Section | 항목 | 필수 여부 | 이유 |
|---------|------|----------|------|
| 1 | 청사진 참조 (Line 번호) | ✅ 필수 | 근거 추적 |
| 2 | 프로젝트 표준 참조 (Line 번호) | ✅ 필수 | 표준 준수 |
| 3 | 사용 도구 | ✅ 필수 | Step 2-5 |
| 4 | 입력/출력 명세 | ✅ 필수 | Step 1, 8 |
| 5 | 조립 정보 (의존성) | ✅ 필수 | Step 1 이해 |
| 6 | 완성 기준 | ✅ 필수 | Step 1, 2, 7 |
| 7 | 구현 힌트 | ✅ 필수 | Step 3 |
| 8 | 예상 시간 | ⚠️ 권장 | 계획 수립 |
| 9 | 메타정보 | ✅ 필수 | 추적 관리 |
| - | **난이도** | ⚠️ 권장 | 우선순위 |
| - | **구현 위치** | ✅ 필수 | Step 3 파일 생성 |
| - | **자주 하는 실수** | ⚠️ 권장 | 실수 방지 |

---

## 📝 다음 단계 제안

### 1. TASK_BREAKDOWN_GUIDE 보완

**추가해야 할 Section**:
- Section 10: 난이도 (EASY/MEDIUM/HIGH)
- Section 11: 구현 위치 (파일 경로)
- Section 12: 자주 하는 실수 (❌/✅ 패턴)

**Section 6 명확화**:
- 구현 체크포인트 (어떻게) vs 완성 기준 (언제) 구분

### 2. 청사진 작성 가이드 생성 필요

**새 문서**: `BLUEPRINT_GUIDE.md`

**포함 내용**:
- 청사진에 포함되어야 할 정보 체크리스트
- Line 번호 참조 가능한 구조화 방법
- 프로젝트 표준 문서 연결 방법
- 함수 시그니처 작성 수준
- 코드 예시 작성 가이드

### 3. 검증 필요

**실제 프로젝트로 테스트**:
- 청사진 샘플 → Task 문서 작성 실습
- Task 문서 → Checklist 작성 실습
- 각 단계에서 "이전 단계 문서만" 보고 가능한지 확인

---

## 🔗 관련 문서

- `TASK_BREAKDOWN_GUIDE.md` - 신규 작성 (2025-01-10)
- `CHECKLIST_GUIDE.md` - 신규 작성 (2025-01-10)
- `CORE_METHODOLOGY.md` - AI 협업 방법론 표준
- `📖_V5_TaskBreakdown_작성가이드_v3.6.md` - 1호 작성 가이드
- `UNIFIED_TASK_BREAKDOWN_v5.0.md` - 실제 작업분해 예시

---

**작성 완료**: 2025-01-10
**다음 작업**: Jason과 Gap 논의 후 가이드 보완
