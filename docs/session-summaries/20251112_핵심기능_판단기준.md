# 핵심 기능 판단 기준 (Core Function Decision Criteria)

**날짜**: 2025-11-12
**작성자**: 2호 (Claude Code)
**배경**: Phase 2 주식 거래 플랫폼 분석 중 발견된 핵심 원칙

---

## 🎯 핵심 원칙

### ❌ 잘못된 기준: 구현 방식으로 기능 구분

```
주식 거래 플랫폼 분석 시 초기 오류:
"수동 거래와 자동 거래는 서로 다른 핵심 기능이다"

→ 핵심 기능 2개:
  1. 수동 거래
  2. 자동 거래

→ 잘못된 구분!
```

### ✅ 올바른 기준: 비즈니스 목적으로 기능 구분

```
주식 거래 플랫폼의 진짜 구조:
"거래" = 핵심 기능 1개
 ├─ 구현 방식 A: 수동
 └─ 구현 방식 B: 자동

→ 핵심 기능 1개:
  1. 거래 (구현 방식: 수동/자동)

→ 올바른 구분!
```

**핵심**:
- 수동/자동은 **"다른 기능"이 아니라 "같은 기능의 다른 구현 방식"**
- 거래 실패 = 금전 손실 (방식과 무관하게 동일한 치명도!)

---

## 📊 비교표

| 항목 | 잘못된 구분 (❌) | 올바른 구분 (✅) |
|------|----------------|----------------|
| **핵심 기능 개수** | 수동 거래 + 자동 거래 = 2개 | 거래 = 1개 |
| **수동/자동** | 2개의 다른 기능 | 1개 기능의 구현 방식 |
| **실패 영향** | 자동=A, 수동=B (다름) | 거래 실패=A (동일) |
| **Layer 1 답변** | 어떤 걸 핵심으로 볼지 혼란 | "거래"로 일관되게 답변 |
| **시스템 설계** | 기능별로 쪼개야 함 | 통합된 아키텍처 가능 |

---

## 🔍 실전 적용 방법

### Step 1: 시스템의 존재 이유 파악 (기능 구분)

**질문**: "이 시스템이 없으면 사용자는 무엇을 못 하는가?"

**주식 거래 플랫폼 예시**:
```
시스템 없으면 → 주식 거래를 못 함
→ 핵심 기능 = "거래" (1개)

❌ 잘못된 구분:
   핵심 기능 1: 수동 거래
   핵심 기능 2: 자동 거래

✅ 올바른 구분:
   핵심 기능: 거래
   ├─ 구현 방식 1: 수동
   └─ 구현 방식 2: 자동
```

### Step 2: 실패의 비즈니스 영향 평가 (검증)

**질문**: "핵심 기능이 실패하면 비즈니스 목적 달성에 어떤 영향을 주는가?"

**주식 거래 플랫폼 예시**:
```
거래 기능 실패:

방식 A (수동):
- 사용자 클릭 → 체결 안 됨
- 원하는 가격에 못 삼 → 금전 손실 ✅

방식 B (자동):
- 조건 충족 → 체결 안 됨
- 원하는 가격에 못 삼 → 금전 손실 ✅

→ 구현 방식과 무관하게 동일한 비즈니스 영향!
→ "거래" 1개가 핵심 기능 맞음! ✅
```

### Step 3: 구현 방식이 아닌 결과로 판단

**질문**: "사용자 관점에서 결과가 무엇인가?"

**주식 거래 플랫폼 예시**:
```
사용자 관점:
❌ "자동으로 거래됐는지" 중요 (X)
✅ "원하는 가격에 거래됐는지" 중요 (O)

→ 구현 방식(수동/자동) 무관
→ 결과(거래 성공/실패)가 핵심
```

---

## 💡 Layer 1 질문 적용

### L1-Q1: 실패 파급력

**올바른 사고 흐름**:
```
1. 핵심 기능 식별: "거래"
2. 실패 시나리오: 거래 요청 실패, 체결 지연
3. 비즈니스 영향: 금전 손실
4. 복구 가능성: 시장 변동으로 복구 불가
5. 결론: A (치명적)

구현 방식(수동/자동)은 고려 대상 아님!
```

### L1-Q2: 정보 형태

**올바른 사고 흐름**:
```
1. 핵심 기능: "거래"
2. 필요 정보: 주가, 호가, 거래량
3. 정보 특성: 숫자, 시계열, 계산 필요
4. 결론: C (숫자·분석 데이터)

수동이든 자동이든 동일한 데이터 처리!
```

### L1-Q3: 응답 시점

**올바른 사고 흐름**:
```
1. 핵심 기능: "거래"
2. 타이밍 요구사항:
   - 가격 변동 즉시 감지
   - 거래 요청 즉시 체결
   - 결과 즉시 알림
3. 결론: A (즉각 응답)

수동이든 자동이든 실시간 체결 필요!
```

---

## 🎁 핵심 교훈

### 1. 방법론은 How가 아닌 What을 본다

```
❌ "어떻게(How) 구현되는가?"
   → 수동? 자동? 배치? 실시간?

✅ "무엇을(What) 하는가?"
   → 거래? 검색? 분석? 협업?
```

### 2. 핵심 기능의 정확한 구분이 중요!

```
잘못 구분하면:
❌ 수동 거래 + 자동 거래 = 2개 핵심 기능
→ Layer 1 답변 혼란
→ 아키텍처 패밀리 선택 혼란
→ 전체 설계가 틀어짐!

올바르게 구분하면:
✅ 거래 = 1개 핵심 기능 (구현: 수동/자동)
→ Layer 1 일관된 답변
→ 명확한 아키텍처 패밀리
→ 통합된 설계 가능!

주식 거래 플랫폼:
- 핵심 기능: 거래 (1개)
- 구현 방식: 수동/자동/조건부 등 (여러 개)
```

### 3. Layer 1은 아키텍처 패밀리 결정

```
Layer 1의 역할:
→ "이 시스템이 어떤 아키텍처 패밀리에 속하는가?"

판단 근거:
→ 핵심 비즈니스 목적의 특성
→ 구현 세부사항이 아님!
```

---

## 📝 실전 체크리스트

Layer 1 질문 답변 전에 자문하기:

### ✅ 올바른 질문들
- [ ] "이 시스템의 존재 이유는 무엇인가?"
- [ ] "핵심 기능이 실패하면 비즈니스에 어떤 영향이 있는가?"
- [ ] "사용자 관점에서 결과가 무엇인가?"
- [ ] "구현 방식과 무관한 본질적 특성은 무엇인가?"

### ❌ 피해야 할 질문들
- [ ] "어떻게 구현되는가?" (수동/자동/배치/...)
- [ ] "어떤 기술을 쓰는가?" (REST/WebSocket/gRPC/...)
- [ ] "누가 트리거하는가?" (사용자/시스템/스케줄러/...)

---

## 🔗 관련 문서

- **Phase 2 세션 요약**: `20251112_Phase2_복합시스템_도전.md`
- **이론 매핑**: `../ARCHITECTURE_THEORY_MAPPING.md`
- **구현 사례**: `../completed-guide/02-1_IMPLEMENTATION_CASES.md`

---

## 📌 Jason의 원문 피드백

> "핵심 기능 = 자동 거래 ➟ 이게 자동에 의미를 두면 안되고 **"거래"가 핵심이에요**.
> 거래를 시도했을 때 제대로 거래요청이 되느냐 안되느냐,
> 얼마나 빠르게 거래요청이 전달이 되느냐? 이런 게 중요한 거죠."

> "실패에 따른 건 무조건 금전 손실이죠.
> **사야할 것 못사거나 원했던 순간의 가격에 사지 못하는 거니까요.**"

---

**작성**: 2호 (Claude Code)
**검토**: Jason
**상태**: Phase 2 진행 중 발견된 핵심 원칙
**용도**: 복합 시스템의 Layer 1 분석 시 판단 기준
